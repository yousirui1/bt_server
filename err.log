src/test.c: In function ‘send_make_torrent’:
src/test.c:33:15: warning: pointer targets in initialization of ‘char *’ from ‘unsigned char *’ differ in signedness [-Wpointer-sign]
  char *data = &cli->data_buf[PACKET_LEN];
               ^
In file included from src/test.c:1:
./include/base.h:42:13: warning: implicit declaration of function ‘log_msg’ [-Wimplicit-function-declaration]
             log_msg("File: "__FILE__", Line: %05d:  " format"\r\n", __LINE__, ##__VA_ARGS__); \
             ^~~~~~~
src/test.c:41:2: note: in expansion of macro ‘DEBUG’
  DEBUG("file_path: ");
  ^~~~~
src/test.c:42:2: warning: implicit declaration of function ‘gets’; did you mean ‘fgets’? [-Wimplicit-function-declaration]
  gets(file_path);
  ^~~~
  fgets
src/test.c:61:2: warning: implicit declaration of function ‘set_packet_head’ [-Wimplicit-function-declaration]
  set_packet_head(cli->data_buf, MAKE_TORRETN, len, JSON_TYPE, 0);
  ^~~~~~~~~~~~~~~
src/test.c:48:11: warning: unused variable ‘buf’ [-Wunused-variable]
     char *buf = NULL;
           ^~~
src/test.c: In function ‘send_add_task’:
src/test.c:68:15: warning: pointer targets in initialization of ‘char *’ from ‘unsigned char *’ differ in signedness [-Wpointer-sign]
  char *data = &cli->data_buf[PACKET_LEN];
               ^
src/test.c:76:11: warning: unused variable ‘buf’ [-Wunused-variable]
     char *buf = NULL;
           ^~~
src/test.c: In function ‘send_del_task’:
src/test.c:95:15: warning: pointer targets in initialization of ‘char *’ from ‘unsigned char *’ differ in signedness [-Wpointer-sign]
  char *data = &cli->data_buf[PACKET_LEN];
               ^
src/test.c:100:11: warning: unused variable ‘buf’ [-Wunused-variable]
     char *buf = NULL;
           ^~~
src/test.c: In function ‘send_get_task_state’:
src/test.c:118:15: warning: pointer targets in initialization of ‘char *’ from ‘unsigned char *’ differ in signedness [-Wpointer-sign]
  char *data = &cli->data_buf[PACKET_LEN];
               ^
src/test.c:123:11: warning: unused variable ‘buf’ [-Wunused-variable]
     char *buf = NULL;
           ^~~
src/test.c: In function ‘send_set_tracker’:
src/test.c:141:15: warning: pointer targets in initialization of ‘char *’ from ‘unsigned char *’ differ in signedness [-Wpointer-sign]
  char *data = &cli->data_buf[PACKET_LEN];
               ^
src/test.c:146:11: warning: unused variable ‘buf’ [-Wunused-variable]
     char *buf = NULL;
           ^~~
src/test.c: In function ‘wait_input’:
src/test.c:168:10: warning: variable ‘temp’ set but not used [-Wunused-but-set-variable]
     char temp;
          ^~~~
src/test.c: In function ‘tcp_loop’:
src/test.c:184:15: warning: pointer targets in initialization of ‘char *’ from ‘unsigned char *’ differ in signedness [-Wpointer-sign]
  char *data = &cli->data_buf[PACKET_LEN];
               ^
src/test.c:203:5: error: too many arguments to function ‘send_del_task’
     send_del_task(cli, torrent_id);
     ^~~~~~~~~~~~~
src/test.c:93:13: note: declared here
 static void send_del_task(struct client *cli)
             ^~~~~~~~~~~~~
src/test.c:208:10: warning: implicit declaration of function ‘read_packet_order’ [-Wimplicit-function-declaration]
   switch(read_packet_order(m_client.data_buf))
          ^~~~~~~~~~~~~~~~~
src/test.c: In function ‘main’:
src/test.c:226:16: warning: implicit declaration of function ‘create_tcp’; did you mean ‘creat’? [-Wimplicit-function-declaration]
     server_s = create_tcp();
                ^~~~~~~~~~
                creat
src/test.c:232:11: warning: implicit declaration of function ‘connect_server’; did you mean ‘connect’? [-Wimplicit-function-declaration]
     ret = connect_server(server_s, server_ip, server_port, -1);
           ^~~~~~~~~~~~~~
           connect
src/log.c: In function ‘init_logs’:
src/log.c:20:11: warning: implicit declaration of function ‘stat’; did you mean ‘strcat’? [-Wimplicit-function-declaration]
     ret = stat(LOG_DIR, &file_state);
           ^~~~
           strcat
src/log.c:28:19: warning: implicit declaration of function ‘mkdir’; did you mean ‘rmdir’? [-Wimplicit-function-declaration]
             ret = mkdir(LOG_DIR, 0755);
                   ^~~~~
                   rmdir
In file included from src/log.c:1:
./include/base.h:63:15: warning: ‘return’ with a value, in function returning void
 #define ERROR 1
               ^
src/log.c:32:24: note: in expansion of macro ‘ERROR’
                 return ERROR;
                        ^~~~~
src/log.c:10:6: note: declared here
 void init_logs()
      ^~~~~~~~~
In file included from src/log.c:1:
./include/base.h:42:13: warning: implicit declaration of function ‘log_msg’ [-Wimplicit-function-declaration]
             log_msg("File: "__FILE__", Line: %05d:  " format"\r\n", __LINE__, ##__VA_ARGS__); \
             ^~~~~~~
src/log.c:53:9: note: in expansion of macro ‘DEBUG’
         DEBUG("fopen log error ");
         ^~~~~
src/log.c: At top level:
src/log.c:75:6: warning: conflicting types for ‘log_msg’
 void log_msg(const char *fmt, ...)
      ^~~~~~~
In file included from src/log.c:1:
./include/base.h:42:13: note: previous implicit declaration of ‘log_msg’ was here
             log_msg("File: "__FILE__", Line: %05d:  " format"\r\n", __LINE__, ##__VA_ARGS__); \
             ^~~~~~~
src/log.c:53:9: note: in expansion of macro ‘DEBUG’
         DEBUG("fopen log error ");
         ^~~~~
src/log.c: In function ‘log_msg’:
src/log.c:88:30: warning: implicit declaration of function ‘get_commonlog_time’ [-Wimplicit-function-declaration]
     fprintf(fp_log, "%s:%s", get_commonlog_time(), buf);
                              ^~~~~~~~~~~~~~~~~~
src/log.c:88:23: warning: format ‘%s’ expects argument of type ‘char *’, but argument 3 has type ‘int’ [-Wformat=]
     fprintf(fp_log, "%s:%s", get_commonlog_time(), buf);
                      ~^      ~~~~~~~~~~~~~~~~~~~~
                      %d
src/log.c: In function ‘err_msg’:
src/log.c:105:23: warning: format ‘%s’ expects argument of type ‘char *’, but argument 3 has type ‘int’ [-Wformat=]
     fprintf(fp_err, "%s:%s", get_commonlog_time(), buf);
                      ~^      ~~~~~~~~~~~~~~~~~~~~
                      %d
src/tools.c: In function ‘ustime’:
src/tools.c:142:5: warning: implicit declaration of function ‘gettimeofday’; did you mean ‘SYS_gettimeofday’? [-Wimplicit-function-declaration]
     gettimeofday(&tv, NULL);
     ^~~~~~~~~~~~
     SYS_gettimeofday
src/tools.c: In function ‘trim’:
src/tools.c:156:11: warning: unused variable ‘p’ [-Wunused-variable]
     char *p = NULL;
           ^
In file included from src/tools.c:27:
src/tools.c: In function ‘exec_cmd’:
./include/base.h:47:13: warning: implicit declaration of function ‘err_msg’ [-Wimplicit-function-declaration]
             err_msg("File: "__FILE__", Line: %05d:  " format"\r\n", __LINE__, ##__VA_ARGS__); \
             ^~~~~~~
src/tools.c:192:9: note: in expansion of macro ‘FAIL’
         FAIL("popen cmd: %s", tmp);
         ^~~~
./include/base.h:63:15: warning: ‘return’ with a value, in function returning void
 #define ERROR 1
               ^
src/tools.c:193:16: note: in expansion of macro ‘ERROR’
         return ERROR;
                ^~~~~
src/tools.c:174:6: note: declared here
 void exec_cmd(const char *cmd, char *result)
      ^~~~~~~~
In file included from src/tools.c:27:
src/tools.c: In function ‘get_hotplug_sock’:
./include/base.h:42:13: warning: implicit declaration of function ‘log_msg’ [-Wimplicit-function-declaration]
             log_msg("File: "__FILE__", Line: %05d:  " format"\r\n", __LINE__, ##__VA_ARGS__); \
             ^~~~~~~
src/tools.c:259:9: note: in expansion of macro ‘DEBUG’
         DEBUG("socket err %s", strerror(errno));
         ^~~~~
src/tools.c: In function ‘get_usb_info’:
src/tools.c:282:9: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
     int ret;
         ^~~
In file included from src/tools.c:27:
src/tools.c: In function ‘memtoll’:
./include/base.h:41:21: warning: format ‘%d’ expects argument of type ‘int’, but argument 3 has type ‘long long int’ [-Wformat=]
         do { printf("File: "__FILE__", Line: %05d: " format"\r\n", __LINE__, ##__VA_ARGS__); \
                     ^~~~~~~~
src/tools.c:507:5: note: in expansion of macro ‘DEBUG’
     DEBUG("val %d", val);
     ^~~~~
src/tools.c: In function ‘trim’:
src/tools.c:172:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
src/tools.c: In function ‘get_netcard_status’:
src/tools.c:241:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
src/tools.c: In function ‘enc_get_utf8_size’:
src/tools.c:549:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
src/socket.c: In function ‘send_packet’:
src/socket.c:77:32: warning: pointer targets in passing argument 2 of ‘send_msg’ differ in signedness [-Wpointer-sign]
     ret = send_msg(cli->fd, cli->packet, PACKET_LEN);
                             ~~~^~~~~~~~
src/socket.c:27:5: note: expected ‘const char *’ but argument is of type ‘unsigned char *’
 int send_msg(const int fd, const char *buf, const int len)
     ^~~~~~~~
src/socket.c:80:36: warning: pointer targets in passing argument 2 of ‘send_msg’ differ in signedness [-Wpointer-sign]
         ret = send_msg(cli->fd, cli->token, cli->token_size);
                                 ~~~^~~~~~~
src/socket.c:27:5: note: expected ‘const char *’ but argument is of type ‘unsigned char *’
 int send_msg(const int fd, const char *buf, const int len)
     ^~~~~~~~
src/socket.c:83:36: warning: pointer targets in passing argument 2 of ‘send_msg’ differ in signedness [-Wpointer-sign]
         ret = send_msg(cli->fd, cli->data_buf, cli->data_size);
                                 ~~~^~~~~~~~~~
src/socket.c:27:5: note: expected ‘const char *’ but argument is of type ‘unsigned char *’
 int send_msg(const int fd, const char *buf, const int len)
     ^~~~~~~~
In file included from src/socket.c:1:
src/socket.c: In function ‘create_tcp’:
./include/base.h:42:13: warning: implicit declaration of function ‘log_msg’; did you mean ‘send_msg’? [-Wimplicit-function-declaration]
             log_msg("File: "__FILE__", Line: %05d:  " format"\r\n", __LINE__, ##__VA_ARGS__); \
             ^~~~~~~
src/socket.c:115:9: note: in expansion of macro ‘DEBUG’
         DEBUG("unable to create socket");
         ^~~~~
src/socket.c:110:9: warning: unused variable ‘keepCount’ [-Wunused-variable]
     int keepCount = 5;    //retry count
         ^~~~~~~~~
src/cJSON.c: In function ‘cJSON_strcasecmp’:
src/cJSON.c:41:2: warning: this ‘if’ clause does not guard... [-Wmisleading-indentation]
  if (!s1) return (s1==s2)?0:1;if (!s2) return 1;
  ^~
src/cJSON.c:41:31: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the ‘if’
  if (!s1) return (s1==s2)?0:1;if (!s2) return 1;
                               ^~
src/cJSON.c: In function ‘print_object’:
src/cJSON.c:499:3: warning: this ‘if’ clause does not guard... [-Wmisleading-indentation]
   if (fmt) *ptr++='\n';*ptr=0;
   ^~
src/cJSON.c:499:24: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the ‘if’
   if (fmt) *ptr++='\n';*ptr=0;
                        ^
src/cJSON.c: In function ‘cJSON_DetachItemFromArray’:
src/cJSON.c:526:2: warning: this ‘if’ clause does not guard... [-Wmisleading-indentation]
  if (c->prev) c->prev->next=c->next;if (c->next) c->next->prev=c->prev;if (c==array->child) array->child=c->next;c->prev=c->next=0;return c;}
  ^~
src/cJSON.c:526:37: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the ‘if’
  if (c->prev) c->prev->next=c->next;if (c->next) c->next->prev=c->prev;if (c==array->child) array->child=c->next;c->prev=c->next=0;return c;}
                                     ^~
make: *** [test] 错误 1
